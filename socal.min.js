function SoCal(){this.minDate,this.selectedDate,this.date=new Date,this.today=new Date(this.date.getFullYear(),this.date.getMonth(),this.date.getDate()),this.calendarLevel="day",this.currentDay,this.currentMonth,this.currentYear,this.currentWeekDay,this.daysInCurrentMonth,this.monthStartOffset,this.monthEndOffset,this.callbacks={},this.calendarCollapseEnabled=!1,this.calendarCollapsed=!1,this.showYearEnabled=!1,this.showDateRanges=!1,this.minDateEnabled=!1,this.dateRangeEnabled=!1,this.dateSelectEnabled=!1,this.calendarLevelsEnabled=!1,this.toggleSelect=!0,this.dateRangeEditPosition=null,this.inputValue={},this.dateRange={},this.dateRangesArray=[],this.calendarEl}SoCal.prototype.enableCollapsed=function(a){return this.calendarCollapseEnabled=!0,this.calendarCollapsed=a?a:!1,this},SoCal.prototype.enableDateSelection=function(){return this.dateSelectEnabled=!0,this},SoCal.prototype.enableDateRanges=function(){return this.dateSelectEnabled=!0,this.dateRangeEnabled=!0,this},SoCal.prototype.enableShowDateRanges=function(){return this.showDateRanges=!0,this},SoCal.prototype.enableMinDate=function(a){return this.minDateEnabled=!0,this.minDate=a?new Date(this.util.formatDate.call(this,a,"numeric")):this.today,this},SoCal.prototype.enableCalendarLevels=function(){return this.calendarLevelsEnabled=!0,this},SoCal.prototype.enableDateSelectToggle=function(){return this.toggleSelect=!0,this},SoCal.prototype.showYear=function(){return this.showYearEnabled=!0,this},SoCal.prototype.bindTo=function(a){return this.calendarElSelector=a,this.calendarEl=document.querySelector(a),this.calendarEl.classList.add("so-cal"),this.init(),this},SoCal.prototype.init=function(){this.getMonthParams(),this.renderCalendar(),this.addAllEvents()},SoCal.prototype.updateCalendar=function(a){this.date=new Date(this.currentYear,this.currentMonth,a),this.init()},SoCal.prototype.getMonthParams=function(){this.currentDay=this.date.getDate(),this.currentMonth=this.date.getMonth(),this.currentYear=this.date.getFullYear(),this.currentWeekday=this.date.getDay(),this.daysInCurrentMonth=new Date(this.currentYear,this.currentMonth+1,0).getDate(),this.monthStartOffset=new Date(this.currentYear,this.currentMonth,1).getDay(),this.monthEndOffset=42-(this.daysInCurrentMonth+this.monthStartOffset),this.currentMonthDisplay=this.config.month_long[this.currentMonth]},SoCal.prototype.onDateChange=function(a){return this.callbacks.dateChange=a,this},SoCal.prototype.onDateRangeChange=function(a){return this.callbacks.dateRangeChange=a,this},SoCal.prototype.onDateRangeArrayChange=function(a){return this.callbacks.dateRangeArrayChange=a,this},SoCal.prototype.setCalendarLevel=function(a,b){return this.calendarLevel=this.config.calendarLevels.indexOf(a)>-1?a:"day",b&&this.updateCalendar(this.currentDay),this},SoCal.prototype.setPreviousMonth=function(){this.currentMonth=this.util.checkMonth(--this.currentMonth),11===this.currentMonth&&this.currentYear--,this.updateCalendar(1)},SoCal.prototype.setNextMonth=function(){this.currentMonth=this.util.checkMonth(++this.currentMonth),0===this.currentMonth&&this.currentYear++,this.updateCalendar(1)},SoCal.prototype.setPreviousYear=function(){this.currentYear--,this.updateCalendar(1)},SoCal.prototype.setNextYear=function(){this.currentYear++,this.updateCalendar(1)},SoCal.prototype.selectDate=function(a){a.classList.contains("disabled")||a.classList.contains("restricted")||("previous"===a.dataset.type&&this.setPreviousMonth(),"next"===a.dataset.type&&this.setNextMonth(),this.setActiveDate(new Date(this.currentYear,this.currentMonth,a.dataset.day)))},SoCal.prototype.setActiveDate=function(a){if(this.toggleSelect){var b=this.removeIntersectingDate(a);if(b)return}else this.selectedDate=a;this.dateRangeEnabled&&(this.addToDateRange(a),this.dateRangeEditPosition=null),this.updateCalendar(a.getDate()),this.callbacks.dateChange&&this.callbacks.dateChange.call(this,this.selectedDate)},SoCal.prototype.selectMonth=function(a){this.currentMonth=a,this.calendarLevel="day",this.updateCalendar(this.currentDay)},SoCal.prototype.selectYear=function(a){this.currentYear=a,this.calendarLevel="day",this.updateCalendar(this.currentDay)},SoCal.prototype.addDate=function(a,b){this.dateRange[b+"_date"]=a,this.dateRange[b+"_display"]=this.util.formatDate.call(this,a,"semantic"),this.callbacks.dateRangeChange&&this.callbacks.dateRangeChange.call(this,this.dateRange)},SoCal.prototype.addToDateRange=function(a){var b=this.config.daterange_positions;if("start"===this.dateRangeEditPosition||!this.dateRange.start_date&&!this.dateRangeEditPosition)return this.addDate(a,"start"),this;if("end"===this.dateRangeEditPosition)return this.addDate(a,"end"),this;var c=+(a.valueOf()>this.dateRange.start_date.valueOf());this.dateRange[b[c]+"_date"]=a,this.dateRange[b[c]+"_display"]=this.util.formatDate.call(this,a,"semantic"),this.callbacks.dateRangeChange&&this.callbacks.dateRangeChange.call(this,this.dateRange)},SoCal.prototype.setDateRange=function(a){return this.dateRange=this.util.formatDateRanges.call(this,a),this},SoCal.prototype.setDateRanges=function(a,b){var c=this;return b&&(this.dateRangesRestricted=!0),a instanceof Array?(this.dateRangesArray=a.map(function(a){return c.util.formatDateRanges.call(c,a)}),this.callbacks.dateRangeArrayChange&&this.callbacks.dateRangeArrayChange.call(this,this.dateRangesArray)):(this.dateRange=c.util.formatDateRanges.call(c,a),this.callbacks.dateRangeChange&&this.callbacks.dateRangeChange.call(this,this.dateRange)),this},SoCal.prototype.setDateRangeEditPosition=function(a){var b=this.calendarEl.querySelector(".so-cal-date.active");return b&&b.classList.remove("active"),this.dateRangeEditPosition===a?void(this.dateRangeEditPosition=null):(event.currentTarget.classList.add("active"),this.dateRangeEditPosition=a,this)},SoCal.prototype.toggleCollapsed=function(){this.calendarCollapseEnabled&&(this.calendarEl.classList.contains("collapsed")?(this.calendarEl.classList.remove("collapsed"),this.calendarCollapsed=!1):(this.calendarEl.classList.add("collapsed"),this.calendarCollapsed=!0))},SoCal.prototype.removeDate=function(a){event.stopPropagation(),delete this.dateRange[a+"_date"],delete this.dateRange[a+"_display"],this.clearSelectedDate(),this.callbacks.dateRangeChange&&this.callbacks.dateRangeChange.call(this,this.dateRange),this.updateCalendar(this.currentDay)},SoCal.prototype.removeIntersectingDate=function(a){var b=a.valueOf();return this.dateRangeEnabled||this.selectedDate.valueOf()!==b?this.dateRange.start_date&&b===this.dateRange.start_date.valueOf()?(this.removeDate("start"),!0):this.dateRange.end_date&&b===this.dateRange.end_date.valueOf()?(this.removeDate("end"),!0):!1:(this.clearSelectedDate(),!0)},SoCal.prototype.clearSelectedDate=function(){this.dateRangeEditPosition=null,this.selectedDate=void 0},SoCal.prototype.removeDaterange=function(a){a&&a.dataset.index>-1?(this.dateRangesArray.splice(a.dataset.index,1),this.callbacks.dateRangeArrayChange&&this.callbacks.dateRangeArrayChange.call(this,this.dateRangeArray,this.dateRange)):(this.dateRange={},this.selectedDate=null,this.callbacks.dateRangeChange&&this.callbacks.dateRangeChange.call(this,this.dateRange)),this.clearSelectedDate(),this.init()},SoCal.prototype.config={month_long:["January","February","March","April","May","June","July","August","September","October","November","December"],month_short:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],day_long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],day_short:["Sun","Mon","Tues","Wed","Thurs","Fri","Sat"],day_mini:["Su","M","Tu","W","Th","F","Sa"],daterange_positions:["start","end"],calendarLevels:["day","month","year"]},SoCal.prototype.util={checkMonth:function(a){return 12===a?0:-1===a?11:a},checkDateParams:function(a){var b=this,c="",d="",e="",f="",g="",h=this.today.valueOf()===a?"today":"",i=function(b,f){!c&&(c=b.start_date&&b.start_date.valueOf()<=a&&b.end_date&&b.end_date.valueOf()>=a?f:""),!d&&(d=b.start_date&&b.start_date.valueOf()===a?"start-cap ":""),!e&&(e=b.end_date&&b.end_date.valueOf()===a?"end-cap ":"")};return this.dateRangesArray.length&&this.dateRangesArray.forEach(function(a){i.call(b,a,b.dateRangesRestricted?"restricted ":"within-range ")}),(this.dateRange.start_date||this.dateRange.end_date)&&i.call(b,this.dateRange,"within-range "),!f&&(f=this.selectedDate&&this.selectedDate.valueOf()===a?" selected-day ":""),this.minDateEnabled&&!g&&(g=a<this.minDate.valueOf()?"disabled ":""),f+c+d+e+g+h},formatDate:function(a,b){var a=new Date(a),c={numeric:a.toLocaleDateString(),semantic:this.config.month_long[a.getMonth()]+" "+a.getDate()+", "+a.getFullYear()};return c[b]},formatDateRanges:function(a){return"string"==typeof a.start_date&&(a.start_date=new Date(a.start_date.replace(/\-/g,"/"))),"string"==typeof a.end_date&&(a.end_date=new Date(a.end_date.replace(/\-/g,"/"))),a.start_date&&(a.start_display=this.util.formatDate.call(this,a.start_date,"semantic")),a.end_date&&(a.end_display=this.util.formatDate.call(this,a.end_date,"semantic")),a}},SoCal.prototype.renderCalendar=function(){this.calendarCollapsed?this.calendarEl.classList.add("collapsed"):this.calendarEl.classList.remove("collapsed");var a=document.createElement("div");a.classList.add("so-cal-container");var b="";this.dateRangeEnabled&&(b+='<div class="so-cal-daterange-header"><div class="so-cal-date '+("start"===this.dateRangeEditPosition?"active":"")+'" id="start-date"><div class="so-cal-daterange-subheader">Start Date</div>'+(this.dateRange.start_display?this.dateRange.start_display+'<span class="remove-date" id="remove-start-date">&times;</span>':"...")+'</div><div class="so-cal-date '+("end"===this.dateRangeEditPosition?"active":"")+'" id="end-date"><div class="so-cal-daterange-subheader">End Date</div>'+(this.dateRange.end_display?this.dateRange.end_display+'<span class="remove-date" id="remove-end-date">&times;</span>':"...")+"</div></div>"),"day"===this.calendarLevel&&(b+=this.renderDayCalendar()),"month"===this.calendarLevel&&(b+=this.renderMonthCalendar()),"year"===this.calendarLevel&&(b+=this.renderYearCalendar()),this.showDateRanges&&(this.dateRange.start||this.dateRangesArray.length)&&(b+=this.renderDateRanges()),this.calendarEl.innerHTML="",a.innerHTML=b,this.calendarEl.appendChild(a)},SoCal.prototype.renderDayCalendar=function(){var a=this.renderDays("short"),b=this.renderDaysBeforeMonth(),c=this.renderDaysCurrentMonth(),d=this.renderDaysAfterMonth(),e=this.calendarLevelsEnabled?"clickable":"",f='<div class="so-cal-header no-select"><div id="so-cal-previous" class="so-cal-changer"><span class="arrow-icon"><</span></div><div class="so-cal-month-title '+e+'" id="month-header">'+this.currentMonthDisplay+(this.showYearEnabled?" - "+this.currentYear:"")+'</div><div id="so-cal-next" class="so-cal-changer"><span class="arrow-icon">></span></div></div><div class="so-cal-days-header">'+a+'</div><div class="so-cal-date-grid">'+b+c+d+"</div>";return f},SoCal.prototype.renderMonthCalendar=function(){var a=this,b=this.calendarLevelsEnabled?"clickable":"",c="";this.config.month_short.forEach(function(b,d){var e=a.currentYear===a.date.getFullYear()&&a.currentMonth===d?"current-month ":"",f=a.minDateEnabled&&a.currentYear<=a.minDate.getFullYear()&&d<a.minDate.getMonth()||a.currentYear<a.date.getFullYear()?"disabled ":"",g=e+f;c+='<div class="so-cal-month '+g+'">'+b+"</div>"});var d='<div class="so-cal-header no-select"><div id="so-cal-previous" class="so-cal-changer"><span class="arrow-icon"><</span></div><div class="so-cal-month-title month-view '+b+'" id="year-header">'+this.currentYear+'</div><div id="so-cal-next" class="so-cal-changer"><span class="arrow-icon">></span></div></div><div class="so-cal-date-grid">'+c+"</div>";return d},SoCal.prototype.renderYearCalendar=function(){for(var a=this,b=this.calendarLevelsEnabled?"clickable":"",c="",d=a.currentYear-5;d<=a.currentYear+6;d++){var e=a.currentYear===d?"current-year ":"",f=a.minDateEnabled&&d<a.minDate.getFullYear()?"disabled ":"",g=e+f;c+='<div class="so-cal-year '+g+'">'+d+"</div>"}var h='<div class="so-cal-header no-select"><div class="so-cal-month-title year-view '+b+'" id="day-header">'+(this.currentYear-5)+"-"+(this.currentYear+6)+'</div></div><div class="so-cal-date-grid">'+c+"</div>";return h},SoCal.prototype.renderDays=function(a){for(var b=[],c="day_"+a,d=0;7>d;d++)b.push('<div class="so-cal-day-title"> '+this.config[c][d]+" </div>");return b.join("")},SoCal.prototype.renderDaysBeforeMonth=function(){for(var a=new Date(this.currentYear,this.currentMonth,0).getDate(),b=[],c=0;c<this.monthStartOffset;c++){var d=new Date(this.currentYear,this.currentMonth-1,a-c).valueOf(),e=this.util.checkDateParams.call(this,d);b.push('<div class="so-cal-day inactive '+e+'" data-type="previous" data-day="'+(a-c)+'"> '+(a-c)+" </div>")}return b.reverse(),b.join("")},SoCal.prototype.renderDaysCurrentMonth=function(){for(var a=[],b=0;b<this.daysInCurrentMonth;b++){var c=new Date(this.currentYear,this.currentMonth,b+1).valueOf(),d=this.util.checkDateParams.call(this,c);a.push('<div class="so-cal-day current-month '+d+'" data-type="current" data-day="'+(b+1)+'">'+(b+1)+"</div>")}return a.join("")},SoCal.prototype.renderDaysAfterMonth=function(){for(var a=[],b=0;b<this.monthEndOffset;b++){var c=new Date(this.currentYear,this.currentMonth+1,b+1).valueOf(),d=this.util.checkDateParams.call(this,c);a.push('<div class="so-cal-day inactive '+d+'" data-type="next" data-day="'+(b+1)+'">'+(b+1)+"</div>")}return a.join("")},SoCal.prototype.renderDateRanges=function(){var a="";return this.dateRangesArray.length?this.dateRangesArray.forEach(function(b,c){a+='<div class="so-cal-daterange">'+b.start_display+(b.end_display?" - "+b.end_display:"")+'<span class="so-cal-remove-daterange" data-index="'+c+'">&times;</span></div>'}):a+='<div class="so-cal-daterange">'+this.dateRange.start_display+(this.dateRange.end_display?" - "+this.dateRange.end_display:"")+'<span class="so-cal-remove-daterange" data-index="-1">&times;</span></div>',a},SoCal.prototype.addAllEvents=function(){"day"===this.calendarLevel&&this.addDayEvents(),"month"===this.calendarLevel&&this.addMonthEvents(),"year"===this.calendarLevel&&this.addYearEvents(),this.dateRangeEnabled&&this.addDateRangeEvents()},SoCal.prototype.addDayEvents=function(){var a=this,b=this.calendarEl.querySelector("#so-cal-previous"),c=this.calendarEl.querySelector("#so-cal-next"),d=this.calendarEl.querySelectorAll(".so-cal-day"),e=Array.prototype.slice.call(d),f=this.calendarEl.querySelector("#month-header");this.dateSelectEnabled&&e.forEach(function(b){b.addEventListener("click",a.selectDate.bind(a,b))}),f&&this.calendarLevelsEnabled&&f.addEventListener("click",this.setCalendarLevel.bind(this,"month",!0)),b&&b.addEventListener("click",this.setPreviousMonth.bind(this)),c&&c.addEventListener("click",this.setNextMonth.bind(this))},SoCal.prototype.addMonthEvents=function(){var a=this,b=this.calendarEl.querySelector("#so-cal-previous"),c=this.calendarEl.querySelector("#so-cal-next"),d=this.calendarEl.querySelectorAll(".so-cal-month"),e=Array.prototype.slice.call(d),f=this.calendarEl.querySelector("#year-header");e.forEach(function(b,c){b.addEventListener("click",a.selectMonth.bind(a,c))}),f.addEventListener("click",this.setCalendarLevel.bind(this,"year",!0)),b&&b.addEventListener("click",this.setPreviousYear.bind(this)),c&&c.addEventListener("click",this.setNextYear.bind(this))},SoCal.prototype.addYearEvents=function(){var a=this,b=this.calendarEl.querySelector("#day-header"),c=this.calendarEl.querySelectorAll(".so-cal-year"),d=Array.prototype.slice.call(c);b.addEventListener("click",this.setCalendarLevel.bind(this,"day",!0)),d.forEach(function(b){b.addEventListener("click",a.selectYear.bind(a,b.innerHTML))})},SoCal.prototype.addDateRangeEvents=function(){var a=this,b=this.calendarEl.querySelector("#start-date"),c=this.calendarEl.querySelector("#end-date"),d=this.calendarEl.querySelector("#remove-start-date"),e=this.calendarEl.querySelector("#remove-end-date"),f=this.calendarEl.querySelectorAll(".so-cal-remove-daterange"),g=Array.prototype.slice.call(f);c.addEventListener("click",this.setDateRangeEditPosition.bind(this,"end")),b.addEventListener("click",this.setDateRangeEditPosition.bind(this,"start")),e&&e.addEventListener("click",this.removeDate.bind(this,"end")),d&&d.addEventListener("click",this.removeDate.bind(this,"start")),g.length&&g.forEach(function(b){b.addEventListener("click",a.removeDaterange.bind(a,b))})};